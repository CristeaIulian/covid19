{"ast":null,"code":"import * as Highcharts from 'highcharts';\nimport { States } from '../../interfaces';\nimport dataByCountry from '../../mocks/by_country.json';\nimport countries from '../../mocks/countries.json';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/covid/covid.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/material/paginator\";\nimport * as i4 from \"@angular/material/radio\";\nfunction ReportsComponent_mat_radio_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-radio-button\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const status_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", status_r1.value)(\"checked\", status_r1.checked);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", status_r1.value, \" \");\n  }\n}\nexport let ReportsComponent = /*#__PURE__*/(() => {\n  class ReportsComponent {\n    constructor(covidService) {\n      this.covidService = covidService;\n      this.countries = {\n        full: [],\n        partial: []\n      };\n      this.countriesSelected = [];\n      this.data = [];\n      this.pageSize = 10;\n      this.peopleStatuses = [{\n        value: States.confirmed,\n        checked: true\n      }, {\n        value: States.recovered,\n        checked: false\n      }, {\n        value: States.deaths,\n        checked: false\n      }];\n      this.peopleStateSelected = 'confirmed';\n      this.showHighcharts = false;\n    }\n    ngOnInit() {\n      this.getCountries();\n    }\n    generateGraph() {\n      const {\n        categories,\n        series\n      } = this.covidService.getDataForGraph(this.countriesSelected, this.countries, this.data, this.covidService.getCurrentState(this.peopleStatuses));\n      const chart = Highcharts.chart('chart-line', {\n        chart: {\n          type: 'line'\n        },\n        title: {\n          text: `Covid-19 / Countries (${this.covidService.getCurrentState(this.peopleStatuses)})`\n        },\n        credits: {\n          enabled: false\n        },\n        legend: {\n          enabled: true\n        },\n        yAxis: {\n          title: {\n            text: 'cases'\n          }\n        },\n        xAxis: {\n          type: 'category'\n        },\n        categories: {\n          data: categories\n        },\n        tooltip: {\n          headerFormat: `<div>Date: {point.key}</div>`,\n          pointFormat: `<div>{series.name}: {point.y}</div>`,\n          shared: true,\n          useHTML: true\n        },\n        series\n      });\n    }\n    getCountries() {\n      this.countries.full = countries;\n      this.countries.partial = this.countries.full.slice(0, this.pageSize);\n    }\n    chipClick(country) {\n      this.countries.partial.forEach((item, index) => {\n        if (country.index === item.index) {\n          this.countries.partial[index].selected = !item.selected;\n          this.countries.partial[index].color = item.selected ? 'primary' : 'secondary';\n          if (item.selected) {\n            this.countriesSelected.push(item.slug);\n          } else {\n            const ndx = this.countriesSelected.indexOf(item.slug);\n            if (ndx > -1) {\n              this.countriesSelected.splice(ndx, 1);\n            }\n          }\n        }\n      });\n      this.getDataByCountry(country);\n    }\n    getDataByCountry(country) {\n      if (!this.data[country.slug]) {\n        this.data[country.slug] = dataByCountry[country.countryCode];\n        this.generateGraph();\n        this.showHighcharts = true;\n      } else {\n        this.generateGraph();\n      }\n    }\n    changeState(e) {\n      this.peopleStatuses.forEach((status, index) => {\n        this.peopleStatuses[index].checked = e.value === status.value;\n      });\n      this.generateGraph();\n    }\n    handlePage($event) {\n      this.countries.partial = this.countries.full.slice($event.pageIndex * $event.pageSize, ($event.pageIndex + 1) * $event.pageSize);\n    }\n    static #_ = this.ɵfac = function ReportsComponent_Factory(t) {\n      return new (t || ReportsComponent)(i0.ɵɵdirectiveInject(i1.CovidService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ReportsComponent,\n      selectors: [[\"app-reports\"]],\n      decls: 9,\n      vars: 4,\n      consts: [[1, \"reports_container\"], [1, \"countries\"], [1, \"control-bar\"], [1, \"status\"], [\"aria-labelledby\", \"example-radio-group-label\", 1, \"example-radio-group\", 3, \"change\"], [\"class\", \"example-radio-button\", 3, \"value\", \"checked\", 4, \"ngFor\", \"ngForOf\"], [3, \"page\", \"length\", \"pageSize\"], [3, \"hidden\"], [\"id\", \"chart-line\"], [1, \"example-radio-button\", 3, \"value\", \"checked\"]],\n      template: function ReportsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"mat-radio-group\", 4);\n          i0.ɵɵlistener(\"change\", function ReportsComponent_Template_mat_radio_group_change_4_listener($event) {\n            return ctx.changeState($event);\n          });\n          i0.ɵɵtemplate(5, ReportsComponent_mat_radio_button_5_Template, 2, 3, \"mat-radio-button\", 5);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(6, \"mat-paginator\", 6);\n          i0.ɵɵlistener(\"page\", function ReportsComponent_Template_mat_paginator_page_6_listener($event) {\n            return ctx.handlePage($event);\n          });\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(7, \"div\", 7);\n          i0.ɵɵelement(8, \"div\", 8);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngForOf\", ctx.peopleStatuses);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"length\", ctx.countries.full.length)(\"pageSize\", ctx.pageSize);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"hidden\", !ctx.showHighcharts);\n        }\n      },\n      dependencies: [i2.NgForOf, i3.MatPaginator, i4.MatRadioGroup, i4.MatRadioButton],\n      styles: [\".reports_container[_ngcontent-%COMP%]   .countries[_ngcontent-%COMP%]   mat-chip-list[_ngcontent-%COMP%]{display:flex;align-items:stretch;flex-wrap:wrap;width:calc(100% - 5px);min-height:232px}.reports_container[_ngcontent-%COMP%]   .countries[_ngcontent-%COMP%]   mat-chip-list[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{color:#fff;text-shadow:0 1px 1px #000}.reports_container[_ngcontent-%COMP%]   .countries[_ngcontent-%COMP%]   mat-chip-list[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   .confirmed[_ngcontent-%COMP%]{color:#ffcb39}.reports_container[_ngcontent-%COMP%]   .countries[_ngcontent-%COMP%]   mat-chip-list[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   .recovered[_ngcontent-%COMP%]{color:#1efb03}.reports_container[_ngcontent-%COMP%]   .countries[_ngcontent-%COMP%]   mat-chip-list[_ngcontent-%COMP%]   mat-chip.mat-chip-selected[_ngcontent-%COMP%]   .death[_ngcontent-%COMP%]{color:#000;text-shadow:none}.reports_container[_ngcontent-%COMP%]   .countries[_ngcontent-%COMP%]   .control-bar[_ngcontent-%COMP%]{display:flex;padding:16px 0}.reports_container[_ngcontent-%COMP%]   .countries[_ngcontent-%COMP%]   .control-bar[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{flex:1}.reports_container[_ngcontent-%COMP%]   .countries[_ngcontent-%COMP%]   .control-bar[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   .mat-radio-button[_ngcontent-%COMP%]{margin-right:10px}.reports_container[_ngcontent-%COMP%]   .countries[_ngcontent-%COMP%]   .control-bar[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{flex:1;color:#fff}.reports_container[_ngcontent-%COMP%]   .countries[_ngcontent-%COMP%]   .control-bar[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-paginator-container{min-height:30px}.reports_container[_ngcontent-%COMP%]   .countries[_ngcontent-%COMP%]   .control-bar[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-paginator-container .mat-button-base{line-height:28px;height:28px}@media (max-width: 840px){.reports_container[_ngcontent-%COMP%]   .countries[_ngcontent-%COMP%]   .control-bar[_ngcontent-%COMP%]{flex-flow:column-reverse}.reports_container[_ngcontent-%COMP%]   .countries[_ngcontent-%COMP%]   .control-bar[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{margin-top:16px}}.reports_container[_ngcontent-%COMP%]   .angular-highcharts[_ngcontent-%COMP%]{height:340px}\"]\n    });\n  }\n  return ReportsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}